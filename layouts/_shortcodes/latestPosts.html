{{- $cols := .Get "cols" | default 3 -}}
{{- $style := .Get "style" | default "" -}}
{{- $number := .Get "number" | default 6 -}}
{{- $section := .Get "section" | default .Params.defaultSection -}}

{{- $css := printf "--hextra-feature-grid-cols: %v; %s" $cols $style -}}


<div
  class="hextra-feature-grid mt-8 hx:grid hx:sm:max-lg:grid-cols-2 hx:max-sm:grid-cols-1 hx:gap-4 hx:w-full not-prose"
  {{ with $css }}style="{{ . | safeCSS }}"{{ end }}
>

  {{ range first $number (where site.RegularPages "Section" $section) }}

    <a
      href="{{ .Permalink }}"
      {{ with $style }}style="{{ . | safeCSS }}"{{ end }}
      class="hextra-feature-card not-prose hx:block hx:relative hx:overflow-hidden hx:rounded-3xl hx:border hx:border-gray-200 hx:hover:border-gray-300 hx:dark:border-neutral-800 hx:dark:hover:border-neutral-700 hx:before:pointer-events-none hx:before:absolute hx:before:inset-0 hx:before:bg-glass-gradient"
    >
      <div class="hx:relative hx:w-full hx:p-6">
        <h3 class="hx:text-2xl hx:font-medium hx:leading-6 hx:mb-2 hx:flex hx:items-center">
          <span>{{ .Title }}</span>
        </h3>
        {{- with .Params.subtitle -}}
          <p class="hx:text-gray-500 hx:dark:text-gray-400 hx:text-sm hx:leading-6">
            {{- . | markdownify -}}
          </p>
        {{- end -}}
      </div>
      {{- with (resources.Get .Params.feature) -}}

        {{- $feature := . -}}
        {{- $feature = $feature.Resize "400x webp q80" -}}

        <img src="{{ $feature.Permalink }}" class="hx:absolute hx:max-w-none" alt="{{ .Title }}" />

      {{- end -}}
    </a>
  
  {{- end -}}

</div>